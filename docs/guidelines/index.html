<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Guidelines · undefined</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Guidelines"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Guidelines · undefined"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gulpjs.com//index.html"/><meta property="og:description" content="# Guidelines"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow-night.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/gulp.svg"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/" target="_self">Docs</a></li><li class=""><a href="https://gulpjs.com/plugins" target="_self">Plugins</a></li><li class=""><a href="https://twitter.com/gulpjs" target="_self">Twitter</a></li><li class=""><a href="https://github.com/gulpjs/gulp/blob/master/CONTRIBUTING.md" target="_self">Contribute</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="guidelines"></a><a href="#guidelines" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Guidelines</h1>
<blockquote>
<p>While these guidelines are totally optional, we <strong>HIGHLY</strong> recommend that everyone follows them. Nobody wants to use a bad plugin. These guidelines will actually help make your life easier by giving you assurance that your plugin fits well within gulp.</p>
</blockquote>
<p><a href="README.md">Writing a Plugin</a> &gt; Guidelines</p>
<ol>
<li>Your plugin should not do something that can be done easily with an existing node module
<ul>
<li>For example: deleting a folder does not need to be a gulp plugin. Use a module like <a href="https://github.com/sindresorhus/del">del</a> within a task instead.</li>
<li>Wrapping every possible thing just for the sake of wrapping it will pollute the ecosystem with low quality plugins that don't make sense within the gulp paradigm.</li>
<li>gulp plugins are for file-based operations! If you find yourself shoehorning a complex process into streams just make a normal node module instead.</li>
<li>A good example of a gulp plugin would be something like gulp-coffee. The coffee-script module does not work with Vinyl out of the box, so we wrap it to add this functionality and abstract away pain points to make it work well within gulp.</li>
</ul></li>
<li>Your plugin should only do <strong>one thing</strong>, and do it well.
<ul>
<li>Avoid config options that make your plugin do completely different tasks</li>
<li>For example: A JS minification plugin should not have an option that adds a header as well</li>
</ul></li>
<li>Your plugin shouldn't do things that other plugins are responsible for
<ul>
<li>It should not concat, <a href="https://github.com/contra/gulp-concat">gulp-concat</a> does that</li>
<li>It should not add headers, <a href="https://www.npmjs.com/package/gulp-header">gulp-header</a> does that</li>
<li>It should not add footers, <a href="https://www.npmjs.com/package/gulp-footer">gulp-footer</a> does that</li>
<li>If it's a common but optional use case, document that your plugin is often used with another plugin</li>
<li>Make use of other plugins within your plugin! This reduces the amount of code you have to write and ensures a stable ecosystem.</li>
</ul></li>
<li>Your plugin <strong>must be tested</strong>
<ul>
<li>Testing a gulp plugin is easy, you don't even need gulp to test it</li>
<li>Look at other plugins for examples</li>
</ul></li>
<li>Add <code>gulpplugin</code> as a keyword in your <code>package.json</code> so you show up on our search</li>
<li>Your plugin API should be a function that returns a stream
<ul>
<li>If you need to store state somewhere, do it internally</li>
<li>If you need to pass state/options between plugins, tack it on the file object</li>
</ul></li>
<li>Do not throw errors inside a stream
<ul>
<li>Instead, you should emit it as an <strong>error</strong> event.</li>
<li>If you encounter an error <strong>outside</strong> the stream, such as invalid configuration while creating the stream, you may throw it.</li>
</ul></li>
<li>Prefix any errors with the name of your plugin
<ul>
<li>For example: <code>gulp-replace: Cannot do regexp replace on a stream</code></li>
<li>Use <a href="https://github.com/gulpjs/plugin-error">PluginError</a> module to make this easy</li>
</ul></li>
<li>Name your plugin appropriately: it should begin with &quot;gulp-&quot; if it is a gulp plugin
<ul>
<li>If it is not a gulp plugin, it should not begin with &quot;gulp-&quot;</li>
</ul></li>
<li>The type of <code>file.contents</code> should always be the same going out as it was when it came in
<ul>
<li>If file.contents is null (non-read) just ignore the file and pass it along</li>
<li>If file.contents is a Stream and you don't support that just emit an error
<ul>
<li>Do not buffer a stream to shoehorn your plugin to work with streams. This will cause horrible things to happen.</li>
</ul></li>
</ul></li>
<li>Do not pass the <code>file</code> object downstream until you are done with it</li>
<li>Use <a href="https://github.com/gulpjs/vinyl#clone"><code>file.clone()</code></a> when cloning a file or creating a new one based on a file.</li>
<li>Use modules from our <a href="/docs/recommended-modules">recommended modules page</a> to make your life easier</li>
<li>Do NOT require <code>gulp</code> as a dependency or peerDependency in your plugin
<ul>
<li>Using gulp to test or automate your plugin workflow is totally cool, just make sure you put it as a devDependency</li>
<li>Requiring gulp as a dependency of your plugin means that anyone who installs your plugin is also installing a new gulp and its entire dependency tree.</li>
<li>There is no reason you should be using gulp within your actual plugin code. If you find yourself doing this open an issue so we can help you out.</li>
</ul></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="why-are-these-guidelines-so-strict"></a><a href="#why-are-these-guidelines-so-strict" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why are these guidelines so strict?</h2>
<p>gulp aims to be simple for users. By providing strict guidelines we are able to provide a consistent and high-quality ecosystem for everyone. While this does add a little more work and thought for plugin authors, it removes a lot of problems later down the road.</p>
<h3><a class="anchor" aria-hidden="true" id="what-happens-if-i-don-t-follow-them"></a><a href="#what-happens-if-i-don-t-follow-them" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What happens if I don't follow them?</h3>
<p>npm is open for everyone, and you are free to make whatever you want but these guidelines were prescribed for a reason. There are acceptance tests coming soon that will be integrated into the plugin search. If you fail to adhere to the plugin guidelines it will be publicly visible/sortable via a scoring system. People will always prefer to use plugins that match &quot;the gulp way&quot;.</p>
<h3><a class="anchor" aria-hidden="true" id="what-does-a-good-plugin-look-like"></a><a href="#what-does-a-good-plugin-look-like" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What does a good plugin look like?</h3>
<pre><code class="hljs css language-js"><span class="hljs-comment">// through2 is a thin wrapper around node transform streams</span>
<span class="hljs-keyword">var</span> through = <span class="hljs-built_in">require</span>(<span class="hljs-string">'through2'</span>);
<span class="hljs-keyword">var</span> PluginError = <span class="hljs-built_in">require</span>(<span class="hljs-string">'plugin-error'</span>);

<span class="hljs-comment">// Consts</span>
<span class="hljs-keyword">const</span> PLUGIN_NAME = <span class="hljs-string">'gulp-prefixer'</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prefixStream</span>(<span class="hljs-params">prefixText</span>) </span>{
  <span class="hljs-keyword">var</span> stream = through();
  stream.write(prefixText);
  <span class="hljs-keyword">return</span> stream;
}

<span class="hljs-comment">// Plugin level function(dealing with files)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gulpPrefixer</span>(<span class="hljs-params">prefixText</span>) </span>{

  <span class="hljs-keyword">if</span> (!prefixText) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PluginError(PLUGIN_NAME, <span class="hljs-string">'Missing prefix text!'</span>);
  }
  prefixText = <span class="hljs-keyword">new</span> Buffer(prefixText); <span class="hljs-comment">// allocate ahead of time</span>

  <span class="hljs-comment">// Creating a stream through which each file will pass</span>
  <span class="hljs-keyword">return</span> through.obj(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file, enc, cb</span>) </span>{
    <span class="hljs-keyword">if</span> (file.isNull()) {
      <span class="hljs-comment">// return empty file</span>
      <span class="hljs-keyword">return</span> cb(<span class="hljs-literal">null</span>, file);
    }
    <span class="hljs-keyword">if</span> (file.isBuffer()) {
      file.contents = Buffer.concat([prefixText, file.contents]);
    }
    <span class="hljs-keyword">if</span> (file.isStream()) {
      file.contents = file.contents.pipe(prefixStream(prefixText));
    }

    cb(<span class="hljs-literal">null</span>, file);

  });

}

<span class="hljs-comment">// Exporting the plugin main function</span>
<span class="hljs-built_in">module</span>.exports = gulpPrefixer;
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#why-are-these-guidelines-so-strict">Why are these guidelines so strict?</a><ul class="toc-headings"><li><a href="#what-happens-if-i-don-t-follow-them">What happens if I don't follow them?</a></li><li><a href="#what-does-a-good-plugin-look-like">What does a good plugin look like?</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/gulp.svg" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/getting-started.html">Getting Started</a><a href="/docs/en/api.html">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/gulp" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/gulpjs" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/gulpjs/gulp">GitHub</a><a class="github-button" href="https://github.com/gulpjs/gulp" data-icon="octicon-star" data-count-href="/gulpjs/gulp/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 GulpJS</section></footer></div></body></html>