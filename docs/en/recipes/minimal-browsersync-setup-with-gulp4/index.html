<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Minimal BrowserSync setup with Gulp 4 · gulp.js</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Minimal BrowserSync setup with Gulp 4"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Minimal BrowserSync setup with Gulp 4 · gulp.js"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gulpjs.com//index.html"/><meta property="og:description" content="# Minimal BrowserSync setup with Gulp 4"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow-night.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-128126650-1"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-128126650-1');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/gulp.svg" alt="gulp.js"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/getting-started/quick-start" target="_self">Getting Started</a></li><li class=""><a href="/docs/en/api/concepts" target="_self">API</a></li><li class=""><a href="https://gulpjs.com/plugins" target="_self">Plugins</a></li><li class=""><a href="https://twitter.com/gulpjs" target="_self">Twitter</a></li><li class=""><a href="https://github.com/gulpjs/gulp/blob/master/CONTRIBUTING.md" target="_self">Contribute</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="minimal-browsersync-setup-with-gulp-4"></a><a href="#minimal-browsersync-setup-with-gulp-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Minimal BrowserSync setup with Gulp 4</h1>
<p><a href="https://www.browsersync.io/">BrowserSync</a> is a great tool to streamline
the development process with the ability to reflect code changes instantaneously
in the browser through live-reloading. Setting up a live-reloading
BrowserSync server with Gulp 4 is very clean and easy.</p>
<h2><a class="anchor" aria-hidden="true" id="step-1-install-the-dependencies"></a><a href="#step-1-install-the-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 1: Install the dependencies</h2>
<pre><code class="hljs">npm <span class="hljs-keyword">install </span>--save-dev <span class="hljs-keyword">browser-sync
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="step-2-setup-the-project-structure"></a><a href="#step-2-setup-the-project-structure" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Setup the project structure</h2>
<pre><code class="hljs">src/
  scripts/
    |__ <span class="hljs-keyword">index</span>.js
dist/
  scripts/
<span class="hljs-keyword">index</span>.html
gulpfile.babel.js
</code></pre>
<p>The goal here is to be able to:</p>
<ul>
<li>Build the source script file in <code>src/scripts/</code>, e.g. compiling with babel, minifying, etc.</li>
<li>Put the compiled version in <code>dist/scripts</code> for use in <code>index.html</code></li>
<li>Watch for changes in the source file and rebuild the <code>dist</code> package</li>
<li>With each rebuild of the <code>dist</code> package, reload the browser to immediately reflect the changes</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="step-3-write-the-gulpfile"></a><a href="#step-3-write-the-gulpfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 3: Write the gulpfile</h2>
<p>The gulpfile could be broken in 3 parts.</p>
<h3><a class="anchor" aria-hidden="true" id="1-write-the-task-to-prepare-the-dist-package-as-usual"></a><a href="#1-write-the-task-to-prepare-the-dist-package-as-usual" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Write the task to prepare the dist package as usual</h3>
<p>Refer to the main <a href="https://github.com/gulpjs/gulp/blob/4.0/README.md#use-last-javascript-version-in-your-gulpfile">README</a>
for more information.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> babel <span class="hljs-keyword">from</span> <span class="hljs-string">'gulp-babel'</span>;
<span class="hljs-keyword">import</span> concat <span class="hljs-keyword">from</span> <span class="hljs-string">'gulp-concat'</span>;
<span class="hljs-keyword">import</span> del <span class="hljs-keyword">from</span> <span class="hljs-string">'del'</span>;
<span class="hljs-keyword">import</span> gulp <span class="hljs-keyword">from</span> <span class="hljs-string">'gulp'</span>;
<span class="hljs-keyword">import</span> uglify <span class="hljs-keyword">from</span> <span class="hljs-string">'gulp-uglify'</span>;

<span class="hljs-keyword">const</span> paths = {
  <span class="hljs-attr">scripts</span>: {
    <span class="hljs-attr">src</span>: <span class="hljs-string">'src/scripts/*.js'</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">'dist/scripts/'</span>
  }
};

<span class="hljs-keyword">const</span> clean = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> del([<span class="hljs-string">'dist'</span>]);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scripts</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> gulp.src(paths.scripts.src, { <span class="hljs-attr">sourcemaps</span>: <span class="hljs-literal">true</span> })
    .pipe(babel())
    .pipe(uglify())
    .pipe(concat(<span class="hljs-string">'index.min.js'</span>))
    .pipe(gulp.dest(paths.scripts.dest));
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="2-setup-the-browsersync-server"></a><a href="#2-setup-the-browsersync-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Setup the BrowserSync server</h3>
<p>And write the tasks to serve and reload the server accordingly.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> browserSync <span class="hljs-keyword">from</span> <span class="hljs-string">'browser-sync'</span>;
<span class="hljs-keyword">const</span> server = browserSync.create();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reload</span>(<span class="hljs-params">done</span>) </span>{
  server.reload();
  done();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serve</span>(<span class="hljs-params">done</span>) </span>{
  server.init({
    <span class="hljs-attr">server</span>: {
      <span class="hljs-attr">baseDir</span>: <span class="hljs-string">'./'</span>
    }
  });
  done();
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="3-watch-for-source-change-rebuild-the-scripts-and-reload-the-server"></a><a href="#3-watch-for-source-change-rebuild-the-scripts-and-reload-the-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Watch for source change, rebuild the scripts and reload the server</h3>
<p>This is trivially accomplished with <code>gulp.series</code></p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> watch = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> gulp.watch(paths.scripts.src, gulp.series(scripts, reload));
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="step-4-bring-it-all-together"></a><a href="#step-4-bring-it-all-together" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 4: Bring it all together</h2>
<p>The last step is to expose the default task</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> dev = gulp.series(clean, scripts, serve, watch);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> dev;
</code></pre>
<p>And profit</p>
<pre><code class="hljs css language-bash">$ gulp
</code></pre>
<p>Now if you go to <a href="http://localhost:3000">http://localhost:3000</a>, which is the default address of the
BrowserSync server, you will see that the end result in the browser is updated everytime you change
the content of the source file. Here is the whole gulpfile:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> babel <span class="hljs-keyword">from</span> <span class="hljs-string">'gulp-babel'</span>;
<span class="hljs-keyword">import</span> concat <span class="hljs-keyword">from</span> <span class="hljs-string">'gulp-concat'</span>;
<span class="hljs-keyword">import</span> del <span class="hljs-keyword">from</span> <span class="hljs-string">'del'</span>;
<span class="hljs-keyword">import</span> gulp <span class="hljs-keyword">from</span> <span class="hljs-string">'gulp'</span>;
<span class="hljs-keyword">import</span> uglify <span class="hljs-keyword">from</span> <span class="hljs-string">'gulp-uglify'</span>;
<span class="hljs-keyword">import</span> browserSync <span class="hljs-keyword">from</span> <span class="hljs-string">'browser-sync'</span>;

<span class="hljs-keyword">const</span> server = browserSync.create();

<span class="hljs-keyword">const</span> paths = {
  <span class="hljs-attr">scripts</span>: {
    <span class="hljs-attr">src</span>: <span class="hljs-string">'src/scripts/*.js'</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">'dist/scripts/'</span>
  }
};

<span class="hljs-keyword">const</span> clean = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> del([<span class="hljs-string">'dist'</span>]);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scripts</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> gulp.src(paths.scripts.src, { <span class="hljs-attr">sourcemaps</span>: <span class="hljs-literal">true</span> })
    .pipe(babel())
    .pipe(uglify())
    .pipe(concat(<span class="hljs-string">'index.min.js'</span>))
    .pipe(gulp.dest(paths.scripts.dest));
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reload</span>(<span class="hljs-params">done</span>) </span>{
  server.reload();
  done();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serve</span>(<span class="hljs-params">done</span>) </span>{
  server.init({
    <span class="hljs-attr">server</span>: {
      <span class="hljs-attr">baseDir</span>: <span class="hljs-string">'./'</span>
    }
  });
  done();
}

<span class="hljs-keyword">const</span> watch = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> gulp.watch(paths.scripts.src, gulp.series(scripts, reload));

<span class="hljs-keyword">const</span> dev = gulp.series(clean, scripts, serve, watch);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> dev;
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#step-1-install-the-dependencies">Step 1: Install the dependencies</a></li><li><a href="#step-2-setup-the-project-structure">Step 2: Setup the project structure</a></li><li><a href="#step-3-write-the-gulpfile">Step 3: Write the gulpfile</a><ul class="toc-headings"><li><a href="#1-write-the-task-to-prepare-the-dist-package-as-usual">1. Write the task to prepare the dist package as usual</a></li><li><a href="#2-setup-the-browsersync-server">2. Setup the BrowserSync server</a></li><li><a href="#3-watch-for-source-change-rebuild-the-scripts-and-reload-the-server">3. Watch for source change, rebuild the scripts and reload the server</a></li></ul></li><li><a href="#step-4-bring-it-all-together">Step 4: Bring it all together</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/gulp.svg" alt="gulp.js" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/getting-started/quick-start">Getting Started</a><a href="/docs/en/api/concepts">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/gulp" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/gulpjs" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/gulpjs/gulp">GitHub</a><a class="github-button" href="https://github.com/gulpjs/gulp" data-icon="octicon-star" data-count-href="/gulpjs/gulp/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 GulpJS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'a6ef919bce0b83de1bcbad1d4ef753f8',
                indexName: 'gulpjs',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>